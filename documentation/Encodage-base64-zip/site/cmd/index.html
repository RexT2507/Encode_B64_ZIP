<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../img/favicon.ico">
        <title>Ligne de commande - Doc Encode base64 & Zip</title>
        <link href="../css/bootstrap-custom.min.css" rel="stylesheet">
        <link href="../css/font-awesome.min.css" rel="stylesheet">
        <link href="../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">
        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
        <![endif]-->

        <script src="../js/jquery-1.10.2.min.js" defer></script>
        <script src="../js/bootstrap-3.0.3.min.js" defer></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
        <script>hljs.initHighlightingOnLoad();</script> 
    </head>

    <body>

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
            <div class="container">

                <!-- Collapsed navigation -->
                <div class="navbar-header">
                    <!-- Expander button -->
                    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                    <a class="navbar-brand" href="..">Doc Encode base64 & Zip</a>
                </div>

                <!-- Expanded navigation -->
                <div class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li >
                                <a href="..">Accueil</a>
                            </li>
                            <li class="active">
                                <a href="./">Ligne de commande</a>
                            </li>
                            <li >
                                <a href="../graph/">Interface graphique</a>
                            </li>
                            <li >
                                <a href="../user_cmd/">Utilisation ligne de commande</a>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav navbar-right">
                        <li>
                            <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                            <li >
                                <a rel="next" href="..">
                                    <i class="fa fa-arrow-left"></i> Previous
                                </a>
                            </li>
                            <li >
                                <a rel="prev" href="../graph/">
                                    Next <i class="fa fa-arrow-right"></i>
                                </a>
                            </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
                <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
        <li class="main active"><a href="#developpement-en-ligne-de-commande-encode-base64-zip">Développement en ligne de commande : Encode base64 &amp; Zip</a></li>
        <li class="main "><a href="#ajout-des-modules">Ajout des modules</a></li>
        <li class="main "><a href="#definition-des-options-du-script">Définition des options du script</a></li>
        <li class="main "><a href="#ajout-du-systeme-de-flag">Ajout du système de flag</a></li>
        <li class="main "><a href="#ajout-des-tests-sur-la-position-des-arguments">Ajout des tests sur la position des arguments</a></li>
        <li class="main "><a href="#ajout-de-la-structure-des-cas-dutilisation-du-programme">Ajout de la structure des cas d'utilisation du programme</a></li>
        <li class="main "><a href="#premier-cas-encodage-en-base64-mais-pas-de-zip">Premier cas encodage en base64 mais pas de zip</a></li>
        <li class="main "><a href="#deuxieme-cas-zippage-du-fichier-mais-pas-dencodage">Deuxième cas zippage du fichier mais pas d'encodage</a></li>
        <li class="main "><a href="#troisieme-cas-encodage-et-zippage-du-fichier">Troisième cas encodage et zippage du fichier</a></li>
        <li class="main "><a href="#quatrieme-cas-encodage-du-zip">Quatrième cas encodage du zip</a></li>
        <li class="main "><a href="#retour-en-cas-dargument-absent">Retour en cas d'argument absent</a></li>
    </ul>
</div></div>
                <div class="col-md-9" role="main">

<h1 id="developpement-en-ligne-de-commande-encode-base64-zip">Développement en ligne de commande : Encode base64 &amp; Zip</h1>
<p>Vous pouvez accéder au code source <a href="https://github.com/RexT2507/Encode_B64_ZIP">ici</a>.</p>
<h1 id="_1"></h1>
<h2 id="ajout-des-modules">Ajout des modules</h2>
<h1 id="_2"></h1>
<p>On ajoute les modules dans le programme :</p>
<p><img alt="Screenshot" src="../img/modules.PNG" /></p>
<p>On va lister ces modules :</p>
<ul>
<li><code>fs</code>      - Le module du système de fichiers Node.js vous permet de travailler avec le système de fichiers de votre ordinateur.</li>
<li><code>btoa</code>    - Le module vous permet d'encoder le contenu de votre Buffer en Base64.</li>
<li><code>adm-zip</code> - Le module vous permet de zipper en un dossier le contenu de votre Buffer.</li>
</ul>
<h1 id="_3"></h1>
<h2 id="definition-des-options-du-script">Définition des options du script</h2>
<h1 id="_4"></h1>
<p>On va définir les options du script : </p>
<p><img alt="Screenshot" src="../img/options.PNG" /></p>
<p>La construction des options d'un script nodejs a toujours le même schéma :</p>
<ul>
<li><code>argv[0]</code>    - Corresponds à l'exécutable de NodeJs.</li>
<li><code>argv[1]</code>    - Corresponds au nom du script appelé.</li>
<li><code>argv[2]</code>    - Corresponds au nom du fichier source que l'on veut traiter.</li>
<li>Les autres argv sont les options du programme.</li>
</ul>
<h1 id="_5"></h1>
<h2 id="ajout-du-systeme-de-flag">Ajout du système de flag</h2>
<h1 id="_6"></h1>
<p>On va ajouter notre système de flag, afin de sélectionner les options de traitement que l'on veut effectuer :</p>
<p><img alt="Screenshot" src="../img/flag.PNG" /></p>
<p>Dans un premier temps on va créer une fonction qui permet de récupérer les flags des différents process et si jamais l'index est déjà lu on parcourt l'index suivant.</p>
<p>On définit les flags pour l'encode, le zippage et les autres :</p>
<ul>
<li><code>--base64</code>        - Permets d'encoder le fichier en base64.</li>
<li><code>--zip</code>           - Permets de zipper le fichier en zip.</li>
<li><code>--base64_zip</code>    - Permets d'encoder un point zip.</li>
</ul>
<h1 id="_7"></h1>
<h2 id="ajout-des-tests-sur-la-position-des-arguments">Ajout des tests sur la position des arguments</h2>
<h1 id="_8"></h1>
<p>Il est important de pouvoir effectuer des tests, par exemple de savoir si on récupère bien le fichier ou encore pour vérifier la position des différents arguments du programme.</p>
<p><img alt="Screenshot" src="../img/tests.PNG" /></p>
<p>Pour l'instant il faut décommenter ces tests afin de pouvoir y accéder mais pourquoi ne pas faire un flag pour appeler le test ou les tests qu'il nous faut.</p>
<h1 id="_9"></h1>
<h2 id="ajout-de-la-structure-des-cas-dutilisation-du-programme">Ajout de la structure des cas d'utilisation du programme</h2>
<h1 id="_10"></h1>
<p>Pas de code seulement un grand commentaire, bien structurer son code est toujours important ;) !</p>
<p><img alt="Screenshot" src="../img/structure.PNG" /></p>
<h2 id="premier-cas-encodage-en-base64-mais-pas-de-zip">Premier cas encodage en base64 mais pas de zip</h2>
<h1 id="_11"></h1>
<p>Nous allons voir le premier cas d'utilisation du programme on reçoit un fichier, puis on encode ce fichier en un fichier en .txt qui contient le contenu de notre fichier en base64.</p>
<h1 id="_12"></h1>
<p>Pour cela nous allons utiliser le flag --base64, nous allons donc utiliser une condition pour dire que la balise de base64 est à true.</p>
<h1 id="_13"></h1>
<p>Bien évidemment le zip ne fonctionnera pas dans le premier cas. Regardons le code.</p>
<p><img alt="Screenshot" src="../img/premier_cas.PNG" /></p>
<h2 id="deuxieme-cas-zippage-du-fichier-mais-pas-dencodage">Deuxième cas zippage du fichier mais pas d'encodage</h2>
<h1 id="_14"></h1>
<p>Nous allons voir le deuxième cas d'utilisation du programme on reçoit un fichier, puis on zip de fichier en un .zip qui contient notre fichier compressé.</p>
<h1 id="_15"></h1>
<p>Pour cela nous allons utiliser le flag --zip, nous allons donc utiliser une condition pour dire que la balise de zip est à true.</p>
<h1 id="_16"></h1>
<p>Bien évidemment l'encodage ne fonctionnera pas dans le deuxième cas. Regardons le code.</p>
<p><img alt="Screenshot" src="../img/deux_cas.PNG" /></p>
<h2 id="troisieme-cas-encodage-et-zippage-du-fichier">Troisième cas encodage et zippage du fichier</h2>
<h1 id="_17"></h1>
<p>Nous allons voir le troisième cas d'utilisation du programme on reçoit un fichier, puis on encode le fichier et ont le zip, on effectue les deux tâches précédentes.</p>
<h1 id="_18"></h1>
<p>Pour cela on utilise les deux flags précédents --base64 et --zip, il y a une condition qui va vérifier que les deux balises soient à true pour effectuer les actions.</p>
<p><img alt="Screenshot" src="../img/trois_cas.PNG" /></p>
<h2 id="quatrieme-cas-encodage-du-zip">Quatrième cas encodage du zip</h2>
<h1 id="_19"></h1>
<p>Nous allons voir le quatrième cas d'utilisation du programme on reçoit un fichier, puis on zip ce fichier et on encode le fichier zip.</p>
<h1 id="_20"></h1>
<p>Cette fonction du programme a été créer à la suite d'une demande d'un utilisateur qui ne voulait pas lancer le programme deux fois pour zipper puis pour encoder ! La fonctionnalité a donc été rajoutée ;)</p>
<h1 id="_21"></h1>
<p>Pour cela nous allons utiliser le flag --base64_zip</p>
<p><img alt="Screenshot" src="../img/quatre_cas.PNG" /></p>
<h2 id="retour-en-cas-dargument-absent">Retour en cas d'argument absent</h2>
<h1 id="_22"></h1>
<p>Il faut penser à mettre une erreur si on ne saisit aucun argument, cela va de soi !</p>
<p><img alt="Screenshot" src="../img/nothing.PNG" /></p>
<p>On en a fini avec la partie développement !</p></div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script>
            var base_url = "..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../js/base.js" defer></script>
        <script src="../search/main.js" defer></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="exampleModalLabel">Search</h4>
            </div>
            <div class="modal-body">
                <p>
                    From here you can search these documents. Enter
                    your search terms below.
                </p>
                <form role="form">
                    <div class="form-group">
                        <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="Keyboard Shortcuts Modal" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="exampleModalLabel">Keyboard Shortcuts</h4>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
